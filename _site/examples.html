<!DOCTYPE html>
<html lang="en-US">
  <head>

    
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134600240-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-134600240-1');
      </script>
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Example Queries | GrapAL</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Example Queries" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write simple queries to answer uniquely interesting questions about academic literature" />
<meta property="og:description" content="Write simple queries to answer uniquely interesting questions about academic literature" />
<link rel="canonical" href="http://localhost:4000/examples.html" />
<meta property="og:url" content="http://localhost:4000/examples.html" />
<meta property="og:site_name" content="GrapAL" />
<script type="application/ld+json">
{"description":"Write simple queries to answer uniquely interesting questions about academic literature","@type":"WebPage","url":"http://localhost:4000/examples.html","headline":"Example Queries","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="assets/css/style.css">
  </head>
  <body>
    <header class="site-header" role="banner">

  <div class="wrapper">
    
      <a class="site-title" href="/">GrapAL</a>
    

      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
            
              <a class="page-link" href="examples.html">Example Queries</a>
          
              <a class="page-link" href="schema.html">Schema</a>
          
              <a class="page-link" href="basics.html">Cypher Basics</a>
          
              <a class="page-link" href="endpoints.html">Endpoints</a>
          
              <a class="page-link" href="faq.html">FAQ</a>
          
              <a class="page-link" href="contact.html">Contact</a>
          
         </div>
      </nav>
  </div>
</header>

      <main id="content" class="main-content" role="main">
  <h2 id="example-queries">Example Queries</h2>
<p>We’ll outline some interesting use cases of GrapAL; to make them your own simply replace the example authors, entities, or papers with your own!</p>

<p>Copy these over into the <a href="http://grapal.allenai.org:7474/browser">interactive browser</a> to visualize the results and explore the graph further!</p>

<h3 id="shortest-path-between-researchers">Shortest path between researchers</h3>
<p>The following finds the shortest path between two researchers based on their coauthors using the shortest path function. We could alternatively use <code class="highlighter-rouge">allShortestPaths</code> to return more than one (if they exist). We can alternatively use researcher IDs based on the URL of their Semantic Scholar page (<a href="https://www.semanticscholar.org/author/Swabha-Swayamdipta/2705113">Swabha Swayamdipta</a>: <code class="highlighter-rouge">2705113</code>), with <code class="highlighter-rouge">(a:Author {author_id: 2705113})</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH p=shortestPath((a:Author)-[:AUTHORS*0..6]-(b:Author)) 
WHERE a.first = "Swabha" 
    AND a.last = "Swayamdipta"
    AND b.first = "Regina" 
    AND b.last = "Barzilay"
RETURN p
</code></pre></div></div>

<h3 id="authors-publishing-the-most-on-an-entity">Authors publishing the most on an entity</h3>
<p>The following finds the authors who have published the most on “Relationship extraction” since 2013. This query is explained further in the <a href="https://www.youtube.com/watch?v=1ivX9sHw2RU">demo video</a>.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (a:Author)-[:AUTHORS]-&gt;(p:Paper),
    (p)-[:MENTIONS]-&gt;
    (:Entity {name: "Relationship extraction"})
WHERE p.year &gt; 2013
WITH a, count(p) as cp
RETURN a, cp 
ORDER BY cp DESC 
</code></pre></div></div>
<p>Furthermore, because entities are stored as casing-specific strings, we can find the canonicalized entity we’re looking for with the following query.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (e:Entity)
WHERE e.name =~ "(?i)relationship extraction.*"
RETURN e 
</code></pre></div></div>

<h3 id="papers-discussing-multiple-entities">Papers discussing multiple entities</h3>
<p>This query gives us papers that mention both contraint programming and NLP. A more interesting query could be accomplished based on an entity’s salience in a paper, which lives on <code class="highlighter-rouge">:MENTIONS</code> edges.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (p:Paper)-[:MENTIONS]-&gt;
    (e1:Entity {name: "Constraint 
        programming"}),
    (p:Paper)-[:MENTIONS]-&gt;
    (e2:Entity {name: "Natural language 
        processing"}) 
RETURN p
</code></pre></div></div>

<h3 id="impact-of-one-biomedical-entity-on-another">Impact of one biomedical entity on another</h3>
<p>The following gives us the shortest path between the entities “Estrogen Receptors” and “Arimidex” based on relationships. It unwinds the resulting path to pull in the type of relation that exists between each pair of related nodes in the shortest path.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH path=shortestPath(
    (er:Entity {name: "Estrogen 
        Receptors"})-
    [:WITH_ENTITY*0..15]-
    (ar:Entity {name: "Arimidex"}))
WITH nodes(path) as ns
UNWIND ns as n
MATCH (n)-[:WITH_ENTITY {position: 0}]-&gt;
    (e0:Entity),
    (n)-[:WITH_ENTITY {position: 1}]-&gt;
        (e1:Entity),
    (n)-[:WITH_RELATIONSHIP]-&gt;
        (r:Relation) 
RETURN e0, r, e1
</code></pre></div></div>

<h3 id="citation-impact-of-one-conference-on-another">Citation impact of one conference on another</h3>
<p>This query returns the number of papers in one conference cited by those in another. This could be extended to different domains, affiliations, or authors. We use regular expression matching because venues are non-deduplicated strings.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (p1:Paper)-[:APPEARS_IN]-&gt;
    (naacl:Venue),
(p2:Paper)-[:APPEARS_IN]-&gt;(cvpr:Venue),
path=((p1)-[:CITES]-&gt;(p2)) 
WHERE naacl.text =~ ".*NAACL.*" 
AND cvpr.text =~ ".*CVPR.*" 
RETURN count(path)
</code></pre></div></div>

<h3 id="shortest-path-excluding-certain-nodes">Shortest path excluding certain nodes</h3>
<p>Occasionally a shortest path query will return a path that fails to provide useful information (i.e. two papers that both mention “Experiments”). If this happens, creating a simple list of excluded nodes or constraining the path to only paths longer than some number of edges should provide more interesting results.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (excluded:Entity) 
WHERE excluded.name in ['Genetic Translation Process', 'Muscle Cells', 'Cell Differentiation process']
WITH collect(excluded) as excluded
MATCH path=shortestPath((mdm2:Entity {name: 'MDM2 gene'})-
  [:MENTIONS|:CITES*0..6]-
  (n1:Entity {name: 'Neuregulin 1'})) 
WHERE length(path) &gt; 5
AND none (n in nodes(path) where n in excluded)
RETURN path limit 1
</code></pre></div></div>

<h3 id="researchers-who-cite-you-who-youve-not-cited">Researchers who cite you who you’ve not cited</h3>
<p>This query returns authors who cite a given author who that author has not cited. This is perhaps a means of finding collaborators, but at the very least an interesting example of multiple aggregations.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (a1:Author {author_id: 1941113})-[:AUTHORS]-&gt;(p1:Paper), 
  (a2:Author)-[:AUTHORS]-&gt;(p2:Paper), 
  (p1)-[c:CITES]-&gt;(p2) 
WITH a1, collect(distinct a2) as cited_authors
MATCH (a1)-[:AUTHORS]-&gt;(p1:Paper),
  (a2:Author)-[:AUTHORS]-&gt;(p2:Paper),
  (p2)-[c:CITES]-&gt;(p1)
WHERE NOT (a1)-[:AUTHORS]-&gt;(p2) 
AND NOT (a2)-[:AUTHORS]-&gt;(p1) 
AND NOT a2 IN cited_authors
WITH a1, a2, count(c) as count_c 
RETURN a1, a2, count_c
ORDER BY count_c DESC limit 2
</code></pre></div></div>

<h3 id="authors-who-have-cited-a-given-author-most">Authors who have cited a given author most</h3>
<p>This returns the authors who have cited a given author the most. Note that this contians a cartesian product &amp; could probably be written better.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MATCH (a:Author {author_id: 40504232})-[:AUTHORS]-&gt;(p:Paper),
       (b:Author)-[:AUTHORS]-&gt;(p2:Paper),
       (p)-[c:CITES]-&gt;(p2)
WHERE NOT (b)-[:AUTHORS]-&gt;(p)
WITH b, count(c) as count_c 
RETURN b, count_c 
ORDER BY count_c DESC
</code></pre></div></div>

    <footer class="site-footer">
    
      <span class="site-footer-owner"><a href="https://github.com/allenai/grapal-website">grapal-website</a> is maintained by <a href="https://github.com/allenai">allenai</a>.</span>
    
    <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>

</main>
  </body>
</html>
